# å®šä½å¸ƒå±€

å®šä½å¸ƒå±€æ˜¯ä¸€ç§å¸ƒå±€ç­–ç•¥ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡ `top`ã€`right`ã€`bottom`ã€`left` å±æ€§æ¥æ“çºµå…ƒç´ çš„åç§»ï¼Œä»¥ä½¿å…¶é”šå®šåœ¨æˆ‘ä»¬æœŸæœ›çš„ä½ç½®ä¸Šã€‚åªè¦å°†å…ƒç´ çš„ `position` å±æ€§è®¾ç½®ä¸ºé `static` å±æ€§ï¼Œé‚£ä¹ˆä¾¿å¯ä»¥å¯¹å…ƒç´ å¯ç”¨å®šä½å¸ƒå±€ï¼Œå®šä½å¸ƒå±€ä¸€å…±æœ‰ 4 ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š

- ç›¸å¯¹å®šä½ï¼›
- ç»å¯¹å®šä½ï¼›
- å›ºå®šå®šä½ï¼›
- æ²¾æ»å®šä½ï¼›

æœ¬æ–‡æ—¨åœ¨æŒ‡å¯¼å¦‚ä½•ä½¿ç”¨å®šä½å¸ƒå±€ï¼Œå¹¶æ¾„æ¸…é‚£äº›éšæ™¦çš„æ¦‚å¿µã€‚

## ç›¸å¯¹å®šä½

ã€Œç›¸å¯¹å®šä½ã€æ˜¯ä¸€ç§é€šè¿‡è®©å…ƒç´ ç›¸å¯¹å…¶åŸå§‹ä½ç½®æ¥åç§»ä»¥è¾¾åˆ°å®šä½ç›®çš„æŠ€æœ¯ã€‚å¦‚æœ `position: relative`ï¼Œé‚£ä¹ˆå…ƒç´ ä¾¿ä¼šå¯ç”¨ç›¸å¯¹å®šä½å¸ƒå±€ã€‚

```css
.jynxio { position: relative }
```

å¦‚æœ `inset: auto`ï¼Œé‚£ä¹ˆå…ƒç´ å°±ä¼šç•™åœ¨åŸå§‹ä½ç½®ï¼Œè¿™ä¸ªåŸå§‹ä½ç½®å°±æ˜¯å…¶åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®ã€‚å¦‚æœ `inset` é `auto`ï¼Œé‚£ä¹ˆå…ƒç´ å°±ä¼šä»¥åŸå§‹ä½ç½®ä¸ºå‚è€ƒç³»æ¥åç§»ï¼Œæ¯”å¦‚ `left: 10px` ä»£è¡¨å…ƒç´ çš„å·¦è¾¹ç•Œå’Œå…¶åŸå§‹ä½ç½®çš„å·¦è¾¹ç•Œçš„è·ç¦»ä¸º `10px`ã€‚

> [inset](https://developer.mozilla.org/en-US/docs/Web/CSS/inset) å¯ä»¥ä¸€æ¬¡æ€§è®¾ç½® `top`ã€`right`ã€`bottom`ã€`left` å±æ€§ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ `inset` åªéµå¾ªç‰©ç†æ–¹å‘ï¼Œä¸éµå¾ªé€»è¾‘æ–¹å‘ã€‚

æ— è®ºå…ƒç´ åç§»ä¸å¦ï¼Œå®ƒéƒ½ä¼šåœ¨çˆ¶å…ƒç´ ä¸­å æ®æ’å®šçš„ç©ºé—´ï¼Œè¿™ä»½ç©ºé—´å°±æ˜¯å…¶åœ¨æµå¼å¸ƒå±€ä¸‹æ‰€å æ®çš„ç©ºé—´ã€‚è‡ªç„¶çš„ï¼Œå½“å®ƒåç§»æ—¶ï¼Œå®ƒä¹Ÿä¸ä¼šå½±å“å…¶å®ƒå…ƒç´ çš„å¸ƒå±€ï¼Œä¸è¿‡å®ƒä¼šé®ç›–å…¶å®ƒå…ƒç´ æˆ–è¶…å‡ºçˆ¶å…ƒç´ çš„è¾¹ç•Œã€‚

[TODO: ç¤ºä¾‹ä»£ç  + å›¾ç‰‡ï¼Œå‚è€ƒã€ŒRelative Positioningã€å°èŠ‚ä¸­çš„ã€ŒThis blue box is interactiveã€çš„äº’åŠ¨ç¤ºä¾‹]

```css
.blue-box {
    position: reltaive;
    top: 20px;
}
```

## ç»å¯¹å®šä½

ã€Œç»å¯¹å®šä½ã€æ˜¯ä¸€ç§é€šè¿‡è®©å…ƒç´ ç›¸å¯¹å…¶åŒ…å«å—æ¥åç§»ä»¥è¾¾åˆ°å®šä½ç›®çš„çš„æŠ€æœ¯ã€‚å¦‚æœ `position: absolute`ï¼Œé‚£ä¹ˆå…ƒç´ ä¾¿ä¼šå¯ç”¨ç»å¯¹å®šä½å¸ƒå±€ã€‚

```css
.jynxio { position: absolute }
```

å¦‚æœ `inset: auto`ï¼Œé‚£ä¹ˆå…ƒç´ å°±ä¼šç•™åœ¨åŸå§‹ä½ç½®ï¼Œè¿™ä¸ªåŸå§‹ä½ç½®å°±æ˜¯å…¶åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®ã€‚å¦‚æœ `inset` é `auto`ï¼Œé‚£ä¹ˆå…ƒç´ å°±ä¼šä»¥åŒ…å«å—ä¸ºå‚è€ƒç³»æ¥åç§»ï¼Œæ¯”å¦‚ `left: 10px` ä»£è¡¨å…ƒç´ çš„å·¦è¾¹ç•Œå’Œå…¶åŒ…å«å—çš„å·¦è¾¹ç•Œçš„è·ç¦»ä¸º `10px`ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæ²¡æœ‰è®¾ç½®å‚ç›´åç§»ï¼Œæ‰€ä»¥å…ƒç´ ä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¿æŒåŸä½ã€‚

å…ƒç´ ä¸ä¼šåœ¨æµå¼å¸ƒå±€ä¸­å æ®ä»»ä½•ç©ºé—´ï¼Œå¹¶ä¸”å…ƒç´ çš„å°ºå¯¸ä¼šå°½å¯èƒ½åœ°å°ä»¥åˆšå¥½åŒ…å«å…¶å†…å®¹ï¼ˆå°±åƒä½¿ç”¨äº† `fit-content`ï¼‰ã€‚å¦å¤–ï¼Œå¯ç”¨äº†ç»å¯¹å®šä½å¸ƒå±€çš„è¡Œå†…å…ƒç´ å¯ä»¥ä½¿ç”¨ `block-size`ã€`margin-block` ç­‰é‚£äº›å¹³å¸¸æ— æ³•åœ¨æµå¼å¸ƒå±€ä¸­ä½¿ç”¨çš„ CSS å±æ€§ã€‚

[TODO: åŸºäºä¸Šè¿°æè¿°çš„ç¤ºä¾‹]

[TODO: ç¤ºä¾‹ä»£ç  + å›¾ç‰‡ï¼Œå‚è€ƒã€Œcontaining puzzleã€ç« èŠ‚çš„ç¬¬å…«å…³ï¼Œè¿™ä¸ªç¤ºä¾‹è¿˜å¯ä»¥é¡ºä¾¿è¡¨è¾¾å‡ºã€Œç›¸å¯¹å®šä½å…ƒç´ æ²¡æœ‰ fit-content è€Œç»å¯¹å®šä½å…ƒç´ æœ‰è¯¥ç‰¹æ€§ï¼Œå› æ­¤è¿™ä¾¿æ˜¯ä¸ºä»€ä¹ˆç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå›¾æ ‡ä¼šæ’åˆ—åœ¨ä¸‹ä¸€è¡Œè€Œä¸æ˜¯åŒä¸€è¡Œã€è¿™ä»¶äº‹]

[TODO: é‡‡ç”¨ã€ŒFixed Positioningã€ç« èŠ‚ä¸­çš„ã€ŒFixed without anchor pointsã€ä¸­çš„ä¾‹å­æ¥è¯æ˜ï¼šå®ƒçš„åˆå§‹ä½ç½®å°±æ˜¯å…¶åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®ï¼Œè€Œè¯¥ä½ç½®å¯èƒ½ä¼šå¾ˆä¸å¯æ€è®®]

æ— è®ºæ˜¯ç»å¯¹å®šä½å…ƒç´ ï¼Œè¿˜æ˜¯å›ºå®šå®šä½å…ƒç´ ï¼Œå®ƒä»¬éƒ½å¯ä»¥é€‰æ‹©åˆå§‹åŒ…å«å—ä½œä¸ºå…¶åŒ…å«å—ï¼Œä½†æ•ˆæœå´æ˜¯ä¸ä¸€æ ·çš„ï¼Œå…·ä½“æ¥è¯´ï¼Œå¯¹äºç»å¯¹å®šä½å…ƒç´ è€Œè¨€ï¼Œåˆå§‹åŒ…å«å—ä»¿ä½›å°±åƒæ˜¯ä¸€ä¸ªè§†å£å¤§å°çš„ã€ä½äºé¡µé¢é¦–å±ä½ç½®çš„çŸ©å½¢ç©ºé—´ï¼Œè¿™å—ç©ºé—´ä¼šéšç€é¡µé¢çš„æ»šåŠ¨è€Œæ¶ˆå¤±åœ¨å¯è§†åŒºåŸŸï¼Œäºæ˜¯å‚è€ƒè¿™å—ç©ºé—´æ¥é”šå®šçš„ç»å¯¹å®šä½å…ƒç´ ä¹Ÿä¼šéšä¹‹ä¸€å¹¶æ¶ˆå¤±ã€‚

[TODO: è¯æ˜å®ƒå“ªæ€•ä»¥åˆå§‹åŒ…å«å—æ¥ä½œä¸ºå…¶åŒ…å«å—ï¼Œå¯ä¸å›ºå®šå®šä½ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šéšç€æ»šåŠ¨è€Œæ¶ˆå¤±åœ¨å¯è§†åŒºåŸŸï¼Œä½†å›ºå®šå®šä½åˆ™ä¸ä¼š]

### å±…ä¸­æŠ€å·§

ç»å¯¹å®šä½å¸ƒå±€æœ‰ä¸€ä¸ªç‰¹åˆ«çš„æŠ€å·§ï¼Œé‚£å°±æ˜¯ï¼šå¦‚æœå…ƒç´ çš„ `top` å’Œ `bottom` ä¸ºé `auto`ï¼Œä¸” `height: auto`ï¼Œé‚£ä¹ˆå…ƒç´ å°±ä¼šè‡ªåŠ¨å¡«å……æ»¡åŒ…å«å—çš„å‚ç›´é«˜åº¦ï¼Œå¯¹äºæ°´å¹³æ–¹å‘ï¼Œä¹ŸåŒæ ·å¦‚æ­¤ã€‚

åˆ©ç”¨è¿™ä¸ªæŠ€å·§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å…ƒç´ å±…ä¸­ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å®ç° 2 ç§ä¸åŒçš„æ•ˆæœï¼Œåˆ†åˆ«æ˜¯ã€Œå¼¹æ€§å±…ä¸­ã€å’Œã€Œå›ºå®šå±…ä¸­ã€ã€‚

- å¼¹æ€§å°ºå¯¸å±…ä¸­ï¼šå…ƒç´ ç›¸å¯¹äºå…¶åŒ…å«å—æ¥å±…ä¸­ï¼Œä¸”å…ƒç´ å°ºå¯¸æ˜¯å¼¹æ€§çš„ï¼›
- å›ºå®šå°ºå¯¸å±…ä¸­ï¼šå…ƒç´ ç›¸å¯¹äºå…¶åŒ…å«å—æ¥å±…ä¸­ï¼Œä¸”å…ƒç´ å°ºå¯¸æ˜¯å›ºå®šçš„ï¼›

```css
.auto-size-center {
    position: absolute;
    inset: 20px;
    block-size: auto;    /* ä»¤å‚ç›´å±…ä¸­ */
    inline-size: auto;   /* ä»¤æ°´å¹³å±…ä¸­ */
}

.fixed-size-center {
    position: absolute;
    inset: 0;
    block-size: 100px;
    inline-size: 100px;
    margin-block: auto;  /* ä»¤å‚ç›´å±…ä¸­ */
    margin-inline: auto; /* ä»¤æ°´å¹³å±…ä¸­ */
}
```

## å›ºå®šå®šä½

ã€Œå›ºå®šå®šä½ã€æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»å¯¹å®šä½ï¼Œå®ƒä¼šç»§æ‰¿ç»å¯¹å®šä½çš„æ‰€æœ‰ç‰¹æ€§ã€‚å¦‚æœ `position: fixed`ï¼Œé‚£ä¹ˆå…ƒç´ ä¾¿ä¼šå¯ç”¨å›ºå®šå®šä½å¸ƒå±€ã€‚

```css
.jynxio { position: fixed }
```

ç›¸è¾ƒäºç»å¯¹å®šä½ï¼Œå›ºå®šå®šä½æœ‰ 2 ä¸ªä¸åŒï¼š

- å¯¹å¾…åŸå§‹ä½ç½®çš„æ–¹å¼ä¸åŒï¼›
- å¯¹å¾…åˆå§‹åŒ…å«å—çš„æ–¹å¼ä¸åŒï¼›

### å¯¹å¾…åŸå§‹ä½ç½®çš„æ–¹å¼

å’Œç»å¯¹å®šä½ä¸åŒçš„æ˜¯ï¼Œå›ºå®šå®šä½å…ƒç´ çš„åŸå§‹ä½ç½®ä¸æ˜¯ã€Œå…ƒç´ åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®ã€ï¼Œè€Œæ˜¯ã€Œå…ƒç´ åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®åœ¨é¦–å±ä¸Šçš„æŠ•å½±ã€ã€‚

å…·ä½“æ¥è¯´ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼šå¯¹äºä¸€ä¸ªå¯ä»¥æ°´å¹³å’Œå‚ç›´æ»šåŠ¨çš„ç½‘é¡µï¼Œè§†å£æ­£å®šä½åœ¨é¦–å±ä½ç½®ï¼ˆæ°´å¹³æ»šåŠ¨å’Œå‚ç›´æ»šåŠ¨çš„åˆå§‹ä½ç½®ï¼‰ï¼Œæ¸²æŸ“å¼•æ“åƒå¯¹å¾…ç»å¯¹å®šä½å…ƒç´ ä¸€æ ·ï¼Œæ¥æ‰¾åˆ°å›ºå®šå®šä½å…ƒç´ åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®ï¼Œç„¶åç»˜åˆ¶å®ƒï¼Œç»˜åˆ¶çš„ç»“æœä¼šæŠ•å½±åˆ°é¦–å±çš„è§†å£ä¸Šï¼Œè€Œè¿™ä»½æŠ•å½±çš„å†…å®¹å°±æ˜¯æœ€ç»ˆçš„æ¸²æŸ“ç»“æœï¼Œæ— è®ºç”¨æˆ·å¦‚ä½•æ»šåŠ¨ç½‘é¡µï¼Œè¿™ä»½æŠ•å½±éƒ½ä¼šå§‹ç»ˆæ¸²æŸ“åœ¨è§†å£ä¸Šã€‚

[TODO: ç¤ºä¾‹]

[TODO: é‡‡ç”¨ã€ŒFixed Positioningã€ç« èŠ‚ä¸­çš„ã€ŒFixed without anchor pointsã€ä¸­çš„ä¾‹å­æ¥è¯æ˜ï¼šå®ƒçš„åˆå§‹ä½ç½®å°±æ˜¯å…¶åœ¨æµå¼å¸ƒå±€ä¸‹çš„ä½ç½®ï¼Œè€Œè¯¥ä½ç½®å¯èƒ½ä¼šå¾ˆä¸å¯æ€è®®]

### å¯¹å¾…åˆå§‹åŒ…å«å—çš„æ–¹å¼

å¦‚æœå›ºå®šå®šä½å…ƒç´ æ²¡æœ‰é€‰æ‹©åˆå§‹åŒ…å«å—ä½œä¸ºå…¶åŒ…å«å—ï¼Œé‚£ä¹ˆå›ºå®šå®šä½å…ƒç´ å°±ä¼šè¡¨ç°å¾—å’Œç»å¯¹å®šä½å…ƒç´ ä¸€æ¨¡ä¸€æ ·ï¼Œå¦åˆ™...

å½“ç»å¯¹å®šä½å…ƒç´ å’Œç»å¯¹å®šä½å…ƒç´ éƒ½é€‰æ‹©äº†åˆå§‹åŒ…å«å—æ¥ä½œä¸ºå…¶åŒ…å«å—æ—¶ï¼š

- åœ¨ç»å¯¹å®šä½çœ¼ä¸­ï¼Œåˆå§‹åŒ…å«å—ä»¿ä½›å°±åƒæ˜¯ä¸€å—è§†å£å¤§å°ä¸”ä½äºé¡µé¢é¦–å±ä½ç½®çš„çŸ©å½¢ç©ºé—´ï¼Œè¿™å—ç©ºé—´ä¼šéšç€é¡µé¢çš„æ»šåŠ¨è€Œæ¶ˆå¤±åœ¨å¯è§†åŒºåŸŸï¼Œäºæ˜¯å‚è€ƒè¿™å—ç©ºé—´æ¥é”šå®šçš„ç»å¯¹å®šä½å…ƒç´ ä¹Ÿä¼šéšä¹‹ä¸€å¹¶æ¶ˆå¤±ã€‚
- åœ¨å›ºå®šå®šä½çœ¼ä¸­ï¼Œåˆå§‹åŒ…å«å—ä»¿ä½›å°±åƒæ˜¯è§†å£æœ¬èº«ï¼Œå‚è€ƒç€è§†å£æ¥é”šå®šçš„å›ºå®šå®šä½å…ƒç´ çš„ä½ç½®ä¸ä¼šéšç€é¡µé¢çš„æ»šåŠ¨è€Œå‘ç”Ÿå˜åŒ–ï¼›

[TODO: ç¤ºä¾‹]

### è‡ªåŠ¨æœå¯»åŒ…å«å—çš„å‡½æ•°

[Josh W. Comeau](https://twitter.com/joshwcomeau) å°±ç¼–å†™äº†ä¸€ä¸ªè‡ªåŠ¨æœå¯»å›ºå®šå®šä½å…ƒç´ çš„åŒ…å«å—çš„è„šæœ¬ï¼Œå®ƒåœ¨ debug æ—¶éå¸¸æœ‰ç”¨ã€‚

```js
function findCulprits(element) {
    if (!element) throw new Error('Could not find element with that selector');

    let parent = element.parentElement;

    while (parent) {
        const { transform, willChange, filter } = getComputedStyle(parent);

        if (transform !== 'none' || willChange === 'transform' || filter !== 'none')
            console.warn('ğŸš¨ Found a culprit! ğŸš¨\n', parent, { transform, willChange, filter });

        parent = parent.parentElement;
    }
}
```

å¦‚æœä½ æƒ³åœ¨ iframe ç¯å¢ƒä¸­è¿è¡Œè¯¥è„šæœ¬ï¼Œé‚£ä¹ˆï¼š

1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼›
2. æ‰“å¼€ã€Œæ§åˆ¶å°ã€æ ‡ç­¾é¡µï¼›
3. æ‰“å¼€ã€ŒJavaScript ä¸Šä¸‹æ–‡ã€å¤šé€‰æ ï¼ˆå…¶é»˜è®¤é€‰é¡¹åº”ä¸º `top`ï¼Œä»£è¡¨æ§åˆ¶å°çš„ JavaScript ä¸Šä¸‹æ–‡å°±æ˜¯å½“å‰ç½‘é¡µï¼‰ï¼›
4. é€‰æ‹©ç›®æ ‡ iframe çš„ JavaScript ä¸Šä¸‹æ–‡ï¼›

### ç¼éš™

åœ¨ä½¿ç”¨å›ºå®šå®šä½å¸ƒå±€æ—¶ï¼Œæˆ–è®¸ä½ å¶å°”ä¼šå‘ç°å…ƒç´ å’Œç›®æ ‡ä½ç½®ä¹‹é—´å­˜åœ¨ `1px` çš„å·®è·æˆ–ç¼éš™ï¼Œè¿™æ˜¯ç”±æµè§ˆå™¨çš„ã€Œèˆå…¥ã€æœºåˆ¶æ‰€å¯¼è‡´çš„ï¼Œä¸€ä¸ªç®€å•æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š

```css
.yourself {
    top: -1px;
}
```

> å…¶å®å…¶ä»–çš„å®šä½å¸ƒå±€ä¹Ÿä¼šé‡åˆ°æ­¤ç±»é—®é¢˜ï¼Œåªä¸è¿‡è¯¥é—®é¢˜æœ€å¸¸å‘ç”Ÿäºå›ºå®šå®šä½å¸ƒå±€ã€‚

## æ²¾æ»å®šä½

ã€Œæ²¾æ»å®šä½ã€ç”¨äºå°†å…ƒç´ æ²¾æ»åœ¨ã€Œæœ€è¿‘æ»šåŠ¨å®¹å™¨ã€çš„è¾¹ç•Œä¸Šï¼Œå®ƒé€šè¿‡è®¾å®šå…ƒç´ ä¸æœ€è¿‘æ»šåŠ¨å®¹å™¨è¾¹ç•Œçš„æœ€å°è·ç¦»æ¥å®ç°ã€‚å¦‚æœ `position: sticky`ï¼Œé‚£ä¹ˆå…ƒç´ ä¾¿ä¼šå¯ç”¨æ²¾æ»å®šä½å¸ƒå±€ã€‚

```css
.jynxio { position: sticky }
```

å¦‚æœ `inset: auto`ï¼Œé‚£ä¹ˆå…ƒç´ å°±å®Œå…¨ç­‰ä»·äºç›¸å¯¹å®šä½å…ƒç´ ã€‚å¦‚æœ `inset` é `auto`ï¼Œé‚£ä¹ˆå½“å…ƒç´ çš„ border box ä¸æœ€è¿‘æ»šåŠ¨å®¹å™¨çš„ content box ä¹‹é—´çš„è·ç¦»è¾¾åˆ°é¢„è®¾æé™æ—¶ï¼Œå…ƒç´ å°±ä¼šæ²¾æ»åœ¨æé™ä½ç½®å¤„ï¼Œå¦åˆ™å…ƒç´ å°±ä¼šè¡¨ç°çš„åƒæ˜¯ä¸€ä¸ªç›¸å¯¹å®šä½å…ƒç´ ã€‚

> æœ€è¿‘æ»šåŠ¨å®¹å™¨æ˜¯æŒ‡è·ç¦»å…ƒç´ æœ€è¿‘çš„æ»šåŠ¨å®¹å™¨ã€‚å¦å¤–ï¼Œä¸Šæ–‡ä¸­çš„â€œæœ€è¿‘æ»šåŠ¨å®¹å™¨çš„ content box ...â€è¿™ç§è¯´æ³•æ˜¯ä¸å‡†ç¡®çš„ï¼Œå¯æ˜¯æˆ‘ä¸çŸ¥é“å¦‚ä½•ç”¨æ–‡å­—æ¥è¡¨è¾¾æˆ‘çœŸæ­£çš„æ„æ€ï¼Œæ‰€ä»¥ä½ éœ€è¦ä»ç¤ºä¾‹ä¸­å»é¢†æ‚Ÿã€‚

[TODO: ç¤ºä¾‹ + æ»šåŠ¨æ—¶ç²˜ä½ + ä¸æ»šåŠ¨æ—¶ç²˜ä½ + å‰ç½®å…ƒç´ å°è¯•é€šè¿‡ margin æ¥æ‹‰è¿‘æ²¾æ»å®šä½å…ƒç´ ï¼Œå¯ä¹Ÿæ²¡æ³•ä½¿å…¶çªç ´æœ€å°é—´éš™ + ã€ŒSticky Positioningã€çš„ offset ä¸­çš„ç¤ºä¾‹ + border box + content box]

æ— è®ºå…ƒç´ æ²¾æ»ä¸å¦ï¼Œå®ƒéƒ½ä¼šåœ¨çˆ¶å…ƒç´ ä¸­å æ®å¾ˆå®šçš„ç©ºé—´ï¼Œè¿™ä»½ç©ºé—´å°±æ˜¯å…¶åœ¨æµå¼å¸ƒå±€ä¸‹æ‰€å æ®çš„ç©ºé—´ã€‚

> ä¸ºé¿å…æ··æ·†ï¼Œæˆ‘éœ€é˜æ˜ä¸€ä¸ªäº‹æƒ…ï¼šæ²¾æ»å®šä½å…ƒç´ ä¼šæ ¹æ®åŒ…å«å—æ¥è®¡ç®—ç™¾åˆ†æ¯”å®½åº¦å’Œåç§»é‡ï¼Œç„¶ååœ¨çˆ¶å…ƒç´ ä¸­å æ®ç©ºé—´ï¼Œæœ€åæ²¾æ»åœ¨æœ€è¿‘æ»šåŠ¨å®¹å™¨ä¸Šã€‚

ä¸€ä¸ªæ˜“è¢«å¿½ç•¥çš„çŸ¥è¯†æ˜¯ï¼šæ²¾æ»å®šä½å…ƒç´ ä»ç„¶æ”¶åˆ°çˆ¶å…ƒç´ çš„é™åˆ¶ï¼Œå½“çˆ¶å…ƒç´ çš„ content box é€æ¸ç¦»å¼€æœ€è¿‘æ»šåŠ¨å®¹å™¨çš„å¯è§†åŒºåŸŸæ—¶ï¼Œæ²¾æ»å®šä½å…ƒç´ ä¹Ÿä¼šä¸€å¹¶ç¦»å¼€ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æƒ³è®©æ²¾æ»å®šä½å…ƒç´ æ›´æ™šä¸€äº›ç¦»å¼€ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ä¸ºå…¶è®¾ç½® `margin` æ¥ä½¿å…¶è¶…å‡ºçˆ¶å…ƒç´ çš„ content box ä»¥è¾¾åˆ°ä½ çš„ç›®çš„ã€‚

[TODO: ç¤ºä¾‹ï½œä¸¤ä¸ª stickyï¼Œä¸€ä¸ªåˆšå¥½è¢« content box åˆšå¥½æ¡†ä½ï¼Œå¦ä¸€ä¸ªåˆ™æœ‰ä½™é‡ï¼Œç„¶åä¸€èµ·å‘ä¸‹æ»šåŠ¨ï¼Œå‘ç°ä¸€ä¸ªæ²¡åŠæ³• stickyï¼Œä¸€ä¸ªåœ¨ sticky]

### è‡ªåŠ¨æœå¯»æœ€è¿‘æ»šåŠ¨å®¹å™¨

[Josh W. Comeau](https://twitter.com/joshwcomeau) è¿˜ç¼–å†™äº†ä¸€ä¸ªè‡ªåŠ¨æœå¯»æœ€è¿‘æ»šåŠ¨å®¹å™¨çš„è„šæœ¬ï¼š

```js
function findCulprits(element) {
  if (!element) throw new Error('Could not find element with that selector');

  let parent = element.parentElement;

  while (parent) {
    const { overflow } = getComputedStyle(parent);

    if (['auto', 'scroll', 'hidden'].includes(overflow)) console.log(overflow, parent);

    parent = parent.parentElement;
  }
}
```

## åŒ…å«å—

åŒ…å«å—ï¼ˆcontaining blockï¼‰æ˜¯ä¸€å—ç”¨äºåŒ…å«å…ƒç´ çš„ç©ºé—´ï¼Œæ¯”å¦‚å…ƒç´ çš„ content box æˆ– padding box éƒ½èƒ½æˆä¸ºåŒ…å«å—ã€‚

å½“å…ƒç´ çš„ `width`ã€`height`ã€`top`ã€`right`ã€`bottom`ã€`left` å±æ€§é‡‡ç”¨äº†ç™¾åˆ†æ¯”å€¼çš„æ—¶å€™ï¼Œè¿™äº›ç™¾åˆ†æ¯”å€¼çš„è®¡ç®—åŸºå‡†å°±å–è‡ªäºåŒ…å«å—ã€‚å…·ä½“æ¥è¯´ï¼šå…ƒç´ çš„ `height`ã€`top`ã€`bottom` å±æ€§çš„ç™¾åˆ†æ¯”å€¼çš„è®¡ç®—åŸºå‡†æ˜¯å…¶åŒ…å«å—çš„ `height`ï¼Œå¯¹äº `width`ã€`left`ã€`right` è€Œè¨€ï¼Œåˆ™æ˜¯å…¶åŒ…å«å—çš„ `width`ã€‚

### å®šä½å¸ƒå±€å…ƒç´ çš„åŒ…å«å—

- å¦‚æœå…ƒç´ çš„ `position` å€¼ä¸º `static`ã€`relative`ã€`sticky`ï¼Œé‚£ä¹ˆå…¶åŒ…å«å—å°±æ˜¯æ»¡è¶³ä¸‹è¿°ä»»æ„ä¸€ä¸ªæ¡ä»¶çš„æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ çš„ content boxï¼Œæ¡ä»¶ä¸ºï¼š
	- è¯¥å…ƒç´ æ˜¯ä¸€ä¸ªå—çº§å®¹å™¨ï¼›
	- è¯¥å…ƒç´ ä¼šåˆ›å»ºæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼›
- å¦‚æœå…ƒç´ çš„ `position` å€¼ä¸º `absolute`ï¼Œé‚£ä¹ˆå…¶åŒ…å«å—å°±æ˜¯ `position` å€¼ä¸ºé `static` çš„æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ çš„ padding boxã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ªç¥–å…ˆå…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šé‡‡ç”¨åˆå§‹åŒ…å«å—æ¥ä½œä¸ºå…¶åŒ…å«å—ï¼›
- å¦‚æœå…ƒç´ çš„ `position` å€¼ä¸º `fixed`ï¼Œé‚£ä¹ˆå…¶åŒ…å«å—å°±æ˜¯åˆå§‹åŒ…å«å—ï¼ˆinitial containing blockï¼‰
- å¦‚æœå…ƒç´ çš„ `position` å€¼ä¸º `absolute` æˆ– `fixed`ï¼Œé‚£ä¹ˆæ»¡è¶³ä¸‹è¿°ä»»æ„ä¸€ä¸ªæ¡ä»¶çš„æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ çš„ padding box å°±ä¼šæˆä¸ºå…¶åŒ…å«å—ï¼Œæ¡ä»¶ä¸ºï¼š
	- è¯¥å…ƒç´ çš„ `transform` å€¼ä¸ºé `none`ï¼›
	- è¯¥å…ƒç´ çš„ `perspective` å€¼ä¸ºé `none`ï¼›
	- è¯¥å…ƒç´ çš„ `container-type` å€¼ä¸ºé `normal`ï¼›
	- è¯¥å…ƒç´ çš„ `backdrop=filter` å€¼ä¸ºé `none`ï¼›
	- è¯¥å…ƒç´ çš„ `will-change` å€¼ä¸º `transform` æˆ– `perspective`ï¼›
	- è¯¥å…ƒç´ çš„ `contain` å€¼ä¸º `layout`ã€`paint`ã€`strict`ã€`content`ï¼›
	- è¯¥å…ƒç´ çš„ `filter` å€¼ä¸ºé `none` æˆ– `will-change` å€¼ä¸º `filter`ï¼ˆæ­¤æ¡ä»…ä½œç”¨äº Firefox æµè§ˆå™¨ï¼‰ï¼›

> åˆå§‹åŒ…å«å—ï¼ˆinitial containing blockï¼‰æ˜¯ä¸€ä¸ªç”±è§†å£ï¼ˆviewportï¼‰è¡ç”Ÿçš„çŸ©å½¢åŒºåŸŸï¼Œå®ƒçš„å°ºå¯¸å°±ç­‰äºè§†å£çš„å°ºå¯¸ï¼Œå®ƒçš„ä½ç½®å°±æ˜¯è§†å£çš„ä½ç½®ã€‚å¦å¤–ï¼Œåˆå§‹åŒ…å«å—ä¹Ÿæ˜¯ `<html>` å…ƒç´ çš„åŒ…å«å—ã€‚
>
> å—çº§å®¹å™¨ï¼ˆblock containerï¼‰æ˜¯æŒ‡é‚£äº›ä½œä¸ºå®¹å™¨çš„å—çº§å…ƒç´ ï¼Œå…¶ä¸å—çº§å…ƒç´ çš„åŒºåˆ«åœ¨äºå…¶å¿…é¡»åŒ…å«å†…å®¹ï¼ˆæ–¹å¯è¢«ç§°ä¸ºå®¹å™¨ï¼‰ã€‚
>
> å¦å¤–ï¼Œå—çº§å®¹å™¨è¦ä¹ˆåªåŒ…å«å‚ä¸äº†è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆinline formatting contextï¼‰çš„è¡Œå†…å…ƒç´ ï¼Œè¦ä¹ˆåªåŒ…å«å‚ä¸äº†å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆblock formatting contextï¼‰çš„å—çº§å…ƒç´ ï¼ˆå…¶å®ï¼Œæˆ‘å¯¹è¯¥æè¿°æ„Ÿåˆ°å›°æƒ‘ï¼Œå…¶æ‘˜è‡ªäº [è¿™é‡Œ](https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#calculating_percentage_values_from_the_containing_block)ï¼‰ã€‚

## æ»šåŠ¨å®¹å™¨

> æ»šåŠ¨å®¹å™¨å°±åƒæ˜¯ä¸€æ‰‡é€šå¾€å¼‚æ¬¡å…ƒçš„å¤§é—¨ï¼Œåœ¨å¤–ç•Œçœ‹æ¥ï¼Œå®ƒæ°¸è¿œéƒ½åªæœ‰é‚£ä¹ˆå¤§ï¼Œå¯å®ƒé‡Œé¢å´å¯ä»¥è£…ä¸‹æ— é™å¤šçš„å†…å®¹ã€‚

æ»šåŠ¨å®¹å™¨ï¼ˆscroll containerï¼‰æ˜¯æŒ‡æ¿€æ´»äº†æ»šåŠ¨æœºåˆ¶çš„å…ƒç´ ï¼Œåªè¦æŠŠ `overflow-x` æˆ– `overflow-y` è®¾ç½®ä¸º `auto | hidden | scroll | overlay` ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ¿€æ´»å…ƒç´ çš„æ»šåŠ¨æœºåˆ¶ã€‚

æ³¨æ„ï¼Œåªè¦æ¿€æ´»äº†ä¸€æ¡è½´çš„æ»šåŠ¨æœºåˆ¶ï¼Œé‚£ä¹ˆæ•´ä¸ªå…ƒç´ éƒ½ä¼šå˜æˆæ»šåŠ¨å…ƒç´ ï¼Œå¦ä¸€æ¡è½´çš„æ»šåŠ¨æœºåˆ¶ä¹Ÿä¼šè¢«è‡ªåŠ¨æ¿€æ´»ï¼Œå³ `overflow-*` è‡ªåŠ¨å˜ä¸º `auto`ã€‚

```html
<section>
  <div></div>
</section>

<style>
  section {
    overflow-y: hidden;
    inline-size: 200px;
    block-size: 200px;
    background-color: hotpink;
  }

  div {
    inline-size: 100px;
    block-size: 100px;
    margin-inline-end: 200px;
    margin-block-end: 200px;
    border-radius: 999rem;
    background-color: cornflowerblue;
  }
</style>
```

### å…³äº Hidden

`overflow: hidden` ä¼šéšè—è¶…å‡ºäº† padding box ä¹‹å¤–çš„å†…å®¹

ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†å†…å®¹å…¶å®å¹¶æ²¡æœ‰è¢«çœŸæ­£çš„éšè—æ‰ã€‚è™½ç„¶ç”¨æˆ·æ— æ³•é€šè¿‡æ»šåŠ¨æ¡æˆ–æ»šè½®ç­‰æœºåˆ¶æ¥æŸ¥çœ‹è¢«éšè—çš„å†…å®¹ï¼Œä½†åªè¦å€ŸåŠ©ç¼–ç¨‹å’Œä¸€äº›éª‡å®¢æ‰‹æ®µï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°é‚£äº›è¢«éšè—çš„å†…å®¹ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡å€ŸåŠ©ç¼–ç¨‹å’Œä¸€äº›ç¨å¾®éª‡å®¢çš„æ‰‹æ®µæ¥è¾¾åˆ°

ç”¨æˆ·æ— æ³•é€šè¿‡æ»šåŠ¨æ¡æˆ–é¼ æ ‡æ»šè½®ç­‰æ–¹å¼æ¥æŸ¥çœ‹è¢«éšè—çš„å†…å®¹ï¼Œä½†å´å¯ä»¥é€šè¿‡ç¼–ç¨‹æˆ–ä¸€äº›æ›´éª‡å®¢çš„æ–¹å¼

 `scrollLeft` å±æ€§å’Œ `scrollTo()` æ–¹æ³•æ¥

ä¸€ä¸ªå†·çŸ¥è¯†æ˜¯ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥åšåˆ°ä»¤ä¸€æ¡è½´æ˜¯ `visible` çš„åŒæ—¶ï¼Œå¦ä¸€æ¡è½´æ˜¯ `clip` çš„ã€‚

overlay ä¼šè¢«è‡ªåŠ¨æ›¿æ¢ä¸º auto

### å…³äºæ»šåŠ¨æ¡çš„æ ·å¼

å¯¹äº Windows å’Œ Linuxï¼Œå…ƒç´ è¦ä¹ˆå§‹ç»ˆæ¸²æŸ“æ»šåŠ¨æ¡ï¼Œè¦ä¹ˆå§‹ç»ˆä¸æ¸²æŸ“ï¼Œæ»šåŠ¨æ¡ä¼šå ç”¨å…ƒç´ çš„ padding box çš„ç©ºé—´ã€‚

å¯¹äº MacOSï¼Œå½“ç”¨æˆ·ä½¿ç”¨è§¦æ§æ¿æ—¶ï¼Œå…ƒç´ åªä¼šåœ¨å‘ç”Ÿæ»šåŠ¨æ—¶æ‰æ¸²æŸ“æ»šåŠ¨æ¡ï¼Œæ»šåŠ¨æ¡ä¸ä¼šå ç”¨å…ƒç´ çš„ä»»ä½•ç©ºé—´ï¼Œå½“ç”¨æˆ·ä½¿ç”¨é¼ æ ‡æ—¶ï¼Œåˆ™ä¼šè¡¨ç°å¾—å’Œ Windows å’Œ Linux ç³»ç»Ÿä¸€è‡´ã€‚

å…¶å®å¤§å¤šæ•°çš„ Web ç”¨æˆ·æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿéƒ½æ˜¯ Windowsï¼Œä¸ºäº†æ›´åŠ è´´è¿‘ç”¨æˆ·ï¼Œå»ºè®®å°† MacOS è®¾ç½®ä¸ºæ€»æ˜¯å¸¸æ˜¾æ»šåŠ¨æ¡ã€‚

## åç§»å†²çª

å¦‚æœ `top` å’Œ `bottom` å‘ç”Ÿäº†å†²çªï¼Œé‚£ä¹ˆå– `top`ã€‚å¦‚æœ `left` å’Œ `right` å‘ç”Ÿäº†å†²çªï¼Œé‚£ä¹ˆå– `left`ï¼ˆå½“ `direction: ltr`ï¼‰æˆ– `right`ï¼ˆå½“ `direction: rtl`ï¼‰ã€‚

```css
.jynxio {
    position: relative;
    top:  10px; /*ğŸ‘‘*/ bottom: 30px; /*ğŸ’€*/
    left: 40px; /*ğŸ‘‘*/ right:  20px; /*ğŸ’€*/
}
```

## å±‚å è§„åˆ™

å½“å…ƒç´ ä¸å…ƒç´ ä¹‹é—´å‘ç”Ÿå±‚å æ—¶ï¼Œå±‚å ç­‰çº§æ›´é«˜è€…åœ¨æ›´ä¸Šå±‚ï¼Œå¦‚æœå±‚å ç­‰çº§ä¹Ÿç›¸åŒï¼Œé‚£ä¹ˆ DOM é¡ºåºæ›´æ™šè€…åœ¨æ›´ä¸Šå±‚ã€‚

[TODO: ç¤ºä¾‹ | å±‚å ç­‰çº§ | DOM é¡ºåº]

> åœ¨æµå¼å¸ƒå±€ä¸­ï¼Œç”±äºå…ƒç´ çš„èƒŒæ™¯ã€å†…å®¹ã€è½®å»“æ˜¯åˆ†å¼€ç»˜åˆ¶çš„ï¼Œäºæ˜¯ä¾¿ä¼šåœ¨å±‚å æ—¶äº§ç”ŸçŠ¬ç‰™äº¤é”™çš„ç°è±¡ã€‚è€Œåœ¨å®šä½å¸ƒå±€ä¸­ï¼Œåˆ™ä¸ä¼šäº§ç”Ÿè¿™ç±»ç°è±¡ã€‚

æˆ‘ä¸ªäººå°†ã€Œå±‚å ç­‰çº§ã€å®šä¹‰æˆä¸€ç§ç±»ä¼¼äºã€Œé€‰æ‹©å™¨ä¼˜å…ˆçº§ã€çš„ä¸œè¥¿ï¼Œå…¶è®¡ç®—æ–¹å¼å¤§è‡´å¦‚ä¸‹ï¼š

```html
<html>                  <!-- å±‚å ç­‰çº§: 0     -->
    <body>              <!-- å±‚å ç­‰çº§: 0-0   -->
        <section>       <!-- å±‚å ç­‰çº§: 0-1   -->
        	<div></div> <!-- å±‚å ç­‰çº§: 0-1-2 -->
        </section>
        <section>       <!-- å±‚å ç­‰çº§: 0-0   -->
        	<div></div> <!-- å±‚å ç­‰çº§: 0-2   -->
        </section>
    </body>
    
    <style>
        section:first-child {
            z-index: 1;         /* åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ */
            position: relative;
        }
        div {
            z-index: 2;         /* åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ */
            position: relative;
        }
    </style>
</html>
```

> `z-index: auto` çš„å±‚å ç­‰çº§è¢«è§†ä½œä¸º `0`ã€‚

> Flex å­é¡¹å’Œ Grid å­é¡¹ä¹Ÿå¯ä»¥ä½¿ç”¨ `z-index` æ¥ä¸»åŠ¨è°ƒæ•´å±‚çº§ï¼Œä¸è¿‡ä¸Šä¾‹ä¸­å¹¶æœªæ¼”ç¤ºè¯¥å†…å®¹ã€‚

> è¯·å‹¿ä½¿ç”¨è´Ÿå€¼ `z-index`ï¼Œå› ä¸ºå®ƒåªä¼šå¾’å¢å¤æ‚ã€‚

## å±‚å ä¸Šä¸‹æ–‡

å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰æ˜¯ä¸€ä¸ªè™šæ‹Ÿç©ºé—´ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä¼šç”Ÿæ´»åœ¨æŸä¸ªå±‚å ä¸Šä¸‹æ–‡ä¹‹å†…ï¼Œç„¶åè¿™ä¸ªå±‚å ä¸Šä¸‹æ–‡åˆä¼šå†…åµŒåœ¨å¦ä¸€ä¸ªæ›´å¤§çš„å±‚å ä¸Šä¸‹æ–‡ä¹‹å†…ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå±‚å±‚åµŒå¥—... æœ€åä¾¿ä¼šå½¢æˆä¸€ä¸ªç±»ä¼¼äºæ´‹è‘±çš„ç»“æ„ã€‚

[TODO: å±‚å ä¸Šä¸‹æ–‡æ´‹è‘±å›¾]

### åˆ›å»ºæ–¹æ³•

å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»ºæ–¹æ³•å¦‚ä¸‹ï¼š

1. `<html>`ï¼›
2. `position` ä¸º `fixed | sticky` çš„å…ƒç´ ï¼›
3. `position` ä¸º `relative | absolute` ä¸” `z-index` é `auto` çš„å…ƒç´ ï¼›
4. `container-type` ä¸º `size | inline-size` çš„å…ƒç´ ï¼›
5. `z-index` é `auto` çš„ Flex å­é¡¹å…ƒç´ æˆ– Gird å­é¡¹å…ƒç´ ï¼›
6. `opacity` å°äº `1` çš„å…ƒç´ ï¼›
7. `mix-blend-mode` é `normal` çš„å…ƒç´ ï¼›
8. `transform`ã€`filter`ã€`backdrop-filter`ã€`perspective`ã€`clip-path`ã€`mask`ã€`mask-image`ã€`mask-border` ä¸­ä»»æ„ä¸€ä¸ªå±æ€§å€¼é `none` çš„å…ƒç´ ï¼›
9. `isolation: isolate` çš„å…ƒç´ ï¼›
10. `will-change` å±æ€§å€¼ä¸ºã€Œä¼šåœ¨éé»˜è®¤å€¼æƒ…å†µä¸‹åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„ CSS å±æ€§ã€çš„å…ƒç´ ï¼›
11. `contain` å€¼ä¸º `layout | paint | strict | content` çš„å…ƒç´ ï¼›
12. é¡¶å±‚å…ƒç´ åŠå…¶ `::backdrop` ä¼ªå…ƒç´ ï¼›

å¯¹äºè€æ—§çš„æ¡Œé¢ç«¯æµè§ˆå™¨ï¼Œ`position: sticky` ä¸ä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚

å…³äº `will-change` å±æ€§ï¼Œæ¨èé˜…è¯» [Everything You Need to Know About the CSS will-change Property](https://dev.opera.com/articles/css-will-change-property/) å’Œ [æˆ‘çš„å¦ä¸€ç¯‡åšå®¢](https://www.jynxio.com/browser/page-rendering)ï¼›

[é¡¶å±‚å…ƒç´ ](https://developer.mozilla.org/en-US/docs/Glossary/Top_layer) å¤§æ¦‚æ˜¯æŒ‡è¿›å…¥å…¨å±çš„å…ƒç´ ã€ç”± `HTMLDialogElement.showModal()` å”¤é†’çš„ `<dialog>`ã€ç”± `HTMLElement.showPopover()` å”¤é†’çš„ [Popover å…ƒç´ ](https://developer.mozilla.org/en-US/docs/Web/API/Popover_API)ã€‚

### å…±å¤„äºåŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡çš„çˆ¶å­å…ƒç´ 

å±‚å ä¸Šä¸‹æ–‡æ ‘çš„ç»“æ„å’Œ DOM æ ‘çš„ç»“æ„ä¸æ˜¯å¯¹åº”çš„ï¼Œå› æ­¤å¦‚æœçˆ¶å…ƒç´ æ²¡æœ‰åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆçˆ¶å…ƒç´ å’Œå­å…ƒç´ å°±ä¼šåŒå¤„åœ¨ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ä¹‹ä¸­ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥åˆ¶é€ å‡ºä¸€äº›è®©äººå›°æƒ‘çš„äº‹æƒ…ã€‚æ¯”å¦‚åœ¨ä¸‹ä¾‹ä¸­ï¼Œçˆ¶å…ƒç´ ä¼šé®è”½å­å…ƒç´ ã€‚

```html
<div>
	<div></div>
</div>

<style>
	div > div {
		position: relative;
		z-index: -1;
	}
</style>
```

[TODO: ç¤ºä¾‹]

å¦å¤–ï¼Œå¦‚æœçˆ¶å…ƒç´ åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆå­å…ƒç´ å°±ä¼šè¿›å…¥åˆ°è¿™ä¸ªæ–°çš„å±‚å ä¸Šä¸‹æ–‡ä¸­å»ï¼Œä½†æ˜¯çˆ¶å…ƒç´ ä»ç„¶ä¼šç•™åœ¨åŸæ¥çš„å±‚å ä¸Šä¸‹æ–‡ä¸­ã€‚

### å–„ç”¨ isolation æ¥ä¸»åŠ¨åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡

æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¼šé«˜å¼ºåº¦çš„ä½¿ç”¨ `z-index` æ¥æ§åˆ¶å…ƒç´ çš„å±‚å é¡ºåºå¹¶å¿«é€Ÿçš„é€Ÿé™·å…¥åˆ°æ··ä¹±ä¸­å»ï¼Œç„¶åè¯•å›¾ä½¿ç”¨è¶…çº§å¤§æˆ–è¶…çº§å°çš„å€¼ï¼ˆæ¯”å¦‚ 9999 å’Œ -9999ï¼‰æ¥æå‡ºæœŸæœ›çš„æ•ˆæœï¼Œæœ‰æ—¶è¿™ä¼šå¥æ•ˆï¼Œæœ‰æ—¶åˆ™ä¸ä¼šï¼Œå¯æ˜¯æ— è®ºå¦‚ä½•ï¼Œè¿™éƒ½ä¼šè®©äº‹æƒ…å˜çš„æ›´åŠ éš¾ä»¥ç»´æŠ¤å¹¶åœ¨æœªæ¥çš„æŸä¸€å¤©å†æ¬¡é­é‡è¿™ç±»éº»çƒ¦ï¼Œä¸è¿‡é‚£æ—¶ï¼Œéº»çƒ¦å·²ç»æ›´åŠ éº»çƒ¦äº†ã€‚

æ··ä¹±çš„è§£å†³ä¹‹é“æ˜¯å˜æ¸…è¿™é¢—â€œæ´‹è‘±â€çš„ç»“æ„ï¼Œå¹¶ä¸”é€‚æ—¶çš„ä¸»åŠ¨åˆ›å»ºå±€éƒ¨å±‚å ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºã€Œåœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå¦‚æœå…ƒç´  A çš„å±‚å ç­‰çº§æ¯”å…ƒç´  B çš„æ›´å¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦ä¸ºå…ƒç´  A åˆ›å»ºå±€éƒ¨å±‚å ä¸Šä¸‹æ–‡ï¼Œå…ƒç´  A çš„æ‰€æœ‰åä»£å…ƒç´ çš„å±‚å ç­‰çº§ä¾¿éƒ½ä¼šæ¯” B çš„æ›´å¤§ã€ã€‚

äºæ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸»åŠ¨çš„å°†æŸäº›å¯èƒ½ä¼šå‘ç”Ÿå±‚å çŸ›ç›¾çš„å…ƒç´ é™å®šåœ¨ç›¸åŒæˆ–ä¸åŒçš„å±‚å ä¸Šä¸‹æ–‡ä¸­å»ï¼Œä»¥æ­¤ä½¿äº‹ç‰©æ›´åŠ æœ‰åºï¼Œæœ€ç»ˆæ¶ˆè§£æ··ä¹±ã€‚

æˆ‘æ¨èä½¿ç”¨ `isolation: isolate` æ¥ä¸»åŠ¨åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå®ƒç®€æ´ä¸”æ— å‰¯ä½œç”¨ã€‚

```css
.yourself {
    isolation: isolate;
}
```

> å¦‚æœä½ å¼€å‘çš„æ ·å¼ç»„ä»¶çš„å†…éƒ¨ä½¿ç”¨äº† `z-index`ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä¸ºç»„ä»¶åˆ›å»ºå±€éƒ¨å±‚å ä¸Šä¸‹æ–‡ï¼Œä»¥é¿å…è¿™äº›ä½¿ç”¨äº† `z-index` çš„å…ƒç´ ä¼šè¿›å…¥åˆ°ç»„ä»¶å¤–éƒ¨çš„å±‚å ä¸Šä¸‹æ–‡ä¸­å»ã€‚

### å¯è§†åŒ–å±‚å ä¸Šä¸‹æ–‡æ ‘çš„å·¥å…·

æ— è®ºä½ å¤šä¹ˆç†Ÿæ‚‰å±‚å ä¸Šä¸‹æ–‡ï¼Œä½ éƒ½æ— æ³•é¿å…é™·å…¥åˆ°å…³äºå±‚å ä¸Šä¸‹æ–‡çš„æ··ä¹±ä¸­å»ï¼ˆæˆ‘æ˜æ˜å·²ç»è¿™äº†åšäº†ï¼Œå¯æ˜¯è¿™ä¸ªå®¶ä¼™ä¸ºä»€ä¹ˆè¿˜æ²¡æœ‰å‡ºç°åœ¨é¡¶å±‚å•Šå–‚ï¼ï¼‰ã€‚

[Stacking Contexts Inspector](https://github.com/andreadev-it/stacking-contexts-inspector) æ˜¯ä¸€ä¸ªç”¨äºå¯è§†åŒ–å±‚å ä¸Šä¸‹æ–‡æ ‘çš„æµè§ˆå™¨æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ debugã€‚

## Overflow

visible:  outside the element's padding box. 

hiddenï¼š Overflow content is clipped at the element's padding box. and the clipped content is not visible, but the content still exists.User agents do not add scroll bars and also do not allow users to view the content outside the clipped region by actions such as dragging on a touch screen or using the scroll wheel on a mouse. The content *can* be scrolled programmatically (for example, by setting the value of the [`scrollLeft`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft) property or the [`scrollTo()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTo) method)

clip: Overflow content outside the clipped region is not visible, user agents do not add a scroll bar, and programmatic scrolling is also not supported.

scroll: Overflow content is clipped at the element's padding box

> `overlay` å·²ç»è¿‡æ—¶äº†ï¼Œä»–æ˜¯ `auto` çš„æ—§åï¼Œä½†ä»–æœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œä»–çš„æ»šåŠ¨æ¡ä¸å æ®ç©ºé—´ï¼Œè€Œæ˜¯ç›´æ¥å›æ—¨åœ¨å†…å®¹ä¹‹ä¸Šã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ä¸­ï¼Œå‡ ä¹æ„Ÿè§‰ä¸åˆ°è¿™ä¸¤ç§å·®å¼‚çš„åŒºåˆ«

æ³¨æ„ï¼š

For an `overflow` setting to create the desired effect, the block-level element must have either a set height (`height` or `max-height`) or `white-space` set to `nowrap`.

The JavaScript [`Element.scrollTop`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop) property may be used to scroll through content in a scroll container, including when `overflow` is set to `hidden`.

`overflow-clip-margin` å¯¹ `clip` çš„å½±å“

å¦‚æœä½ æƒ³ç”¨ hiddenï¼Ÿé‚£ä¹ˆä¸å¦¨è€ƒè™‘ clipï¼Œå› ä¸º hidden çš„å‰¯ä½œç”¨ï¼ˆåˆ›å»ºä¸º scrolling containerï¼‰å¯èƒ½ä¼šäº§ç”ŸæŸäº›æ„æ–™ä¹‹å¤–çš„å½±å“ã€‚